{include file="pageheader.html"}
{literal}
<script type="text/javascript">
function check(){
	var galas = document.getElementById("gala");
	var months = document.getElementById("month");
	var days = document.getElementById("day");
	var comments = document.getElementById("comment");
	var imggalas = document.getElementById("imggala");
	if (galas.value == '') {
		alert("填写节日名称");
		galas.focus();
		return false;
	}

	if (months.value == '') {
		alert("选择月份");
		months.focus();
		return false;
	}

	if (days.value == '') {
		alert("选择日期");
		days.focus();
		return false;
	}

	if (imggalas.value == '' && 'add' == '{$flag}' ) {
		alert("选择图片");
		imggalas.focus();
		return false;
	}

	if (comments.value == '') {
		alert("填写备注");
		comments.focus();
		return false;
	}

}

function changeimggala(){
	var fileimg = document.listForm.img_gala.value;
	if (fileimg != ""){
		document.getElementById("imggala").innerHTML = "<img src='" + fileimg +"'  width='200px' height= '10px' />";
	}
}
</script>
{/literal}
<div class="list-div" id="listDiv">
<form method="POST" enctype="multipart/form-data" name="listForm" id="listForm" onsubmit="return check();">
<input type="hidden" name="controller" value="galamgr" />
<input type="hidden" name="action" value="{$flag}" />
{if $flag == 'edit'}
<input type="hidden" name="id" value="{$galaid}" />
{/if}
<table cellspacing='1' cellpadding='3' id='list-table'>

    <tr>
      <td width="150" align="right">节日:</td>
      <td><input type="text" name="gala" id="gala" size="30" {if $flag == 'edit'}value="{$result.gala}"{/if}></td>
    </tr>
    <tr>
      <td width="150" align="right" valign="top">日期(段):</td>
      <td>
      <select name="month" id="month">
      {foreach from=$month item=h}
      <option value="{$h[1]}" {if $flag == 'edit' && $h[0] == $thismonth} SELECTED{/if}>{$h[0]}</option>
      {/foreach}
      </select>月
	  
      <select name="day" id="day">
      {foreach from=$day item=d}
      <option value="{$d[1]}" {if $flag == 'edit' && $d[0] == $thisday} SELECTED{/if}>{$d[0]}</option>
      {/foreach}
      </select>日
      
      至
      
      <select name="month2" id="month2">
      <option value="0"></option>
      {foreach from=$month item=h}
      <option value="{$h[1]}" {if $flag == 'edit' && $h[0] == $thismonth2} SELECTED{/if}>{$h[0]}</option>
      {/foreach}
      </select>月
	  
      <select name="day2" id="day2">
      <option value="0"></option>
      {foreach from=$day item=d}
      <option value="{$d[1]}" {if $flag == 'edit' && $d[0] == $thisday2} SELECTED{/if}>{$d[0]}</option>
      {/foreach}
      </select>日
      
      <br />
      <span style="color:#AAAAAA;font-size:13px">* 非日期段方式后面一组保持留空状态</span> 
      </td>
    </tr>
    <tr>
      <td width="150" align="right" valign="top">图片:</td>
      <td><input type="file" name="img" id="imggala" onchange="changeimggala();" > <br />
      <span id="img_gala"></span>
      <br /><span style="color:#AAAAAA;font-size:13px">* 200K以内,只能是JPG图片jpg后缀名</span>
      {if $flag == 'edit'}<br /><font color=red> * 更新:请重新选取<br /> * 留空:不改变当前图片</font>{/if}
      </td>
    </tr>
    <tr>
      <td width="150" align="right" valign="top">备注:</td>
      <td><input type="text" name="comment" id="comment" size="60" {if $flag == 'edit'}value="{$result.comment}"{/if}>
      	<br /><span style="color:#AAAAAA;font-size:13px">* 节日的简单介绍,100字以内</span></td>
    </tr>

    <tr>
      <td colspan="2" align="center">
	  	  <input type="submit" name="submit" value="{if $flag == 'add'}增加{else}保存{/if}节日" class='button'>
	</td>
    </tr>
  </table>
</form>
</div>


{include file="pagefooter.html"}