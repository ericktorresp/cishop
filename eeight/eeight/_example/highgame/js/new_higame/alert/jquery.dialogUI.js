(function($){if(/1\.(0|1|2)\.(0|1|2)/.test($.fn.jquery)||/^1.1/.test($.fn.jquery)){alert("requires jQuery v1.2.3 or later!  You are using v"+$.fn.jquery);return}var blockUI_lang={t1:"\u6e29\u99a8\u63d0\u793a\uff1a",t2:"\u63d0\u793a\uff1a",t3:"\u786e\u5b9a",t4:"\u53d6\u6d88",t5:"\u9009\u62e9\u6587\u4ef6",t6:"\u63d0\u4ea4\u5931\u8d25\uff0c\u8bf7\u5173\u95ed\u672c\u7a97\u53e3\u518d\u8bd5",t7:"\u5b8c\u6210",t8:"\u6587\u4ef6\u975e\u6cd5\uff0c\u5141\u8bb8\u6587\u4ef6\u683c\u5f0f\u4e3a\uff1a",t9:"\u8f7d\u5165\u6587\u4ef6",t10:"\u8f7d\u5165",t11:"\u6b63\u5728\u8f7d\u5165...."};$.fn._fadeIn=$.fn.fadeIn;var setExpr=(function(){if(!$.browser.msie){return false}var div=document.createElement("div");try{div.style.setExpression("width","0+0")}catch(e){return false}return true})();$.blockUI=function(opts){install(window,opts)};$.unblockUI=function(opts){remove(window,opts)};$.fn.block=function(opts){return this.unblock({fadeOut:0}).each(function(){if($.css(this,"position")=="static"){this.style.position="relative"}if($.browser.msie){this.style.zoom=1}install(this,opts)})};$.fn.unblock=function(opts){return this.each(function(){remove(this,opts)})};$.alert=function(opts){if(typeof(opts)=="string"){opts={message:opts}}opts=$.extend({},$.alert.defaults,opts||{});html='<div id="james_dialogUI_alert" class="'+opts.alertCss+'"><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td align="left" class="'+opts.titleCss+'" id="james_dialogUI_title" align="center">';html+='<div style="padding:0;padding-left:5px;font-size:13px;text-transform:capitalize;font-weight:bold;color:#FFF;float:left;height:20px;line-height:20px;">'+opts.title+"</div></td>";html+='<td style="width:20px;" align="right"><a href="javascript:" id="james_dialogUI_alert_close" class="'+opts.closeCss+'"><em style="display:none;">[X]</em></a></td></tr>';html+='<tr><td colspan="2"><div id="james_dialogUI_alert_content" class="'+opts.contentCss+'">'+opts.message+"</div></td></tr>";html+='<tr><td colspan="2"><input type="button" class="'+opts.buttonCss+'" id="james_dialogUI_alert_close1" value="\u786e\u5b9a"></td></tr></table></div>';$html=$(html);$.blockUI({message:$html,css:{width:opts.width,border:0},overlayCSS:{backgroundColor:"#FFFFFF",opacity:0.6,cursor:"default"}});$("#james_dialogUI_alert_content").html("").css({width:$("#james_dialogUI_alert_content").width(),overflow:"auto","word-break":"break-all"}).html(opts.message);limitHeight($("#james_dialogUI_alert_content"),$(window).height()/2,"scroll");fullCenter($(".blockMsg"));$("#james_dialogUI_alert_close").click(function(){$.unblockUI({fadeOut:opts.fadeOut});opts.onclose()});$("#james_dialogUI_alert_close1").click(function(){$.unblockUI({fadeOut:opts.fadeOut});opts.onclose()});if(opts.keyCode&&opts.keyCode!=null){$(document).keypress(function(e){if(e.keyCode==opts.keyCode){$.unblockUI({fadeOut:opts.fadeOut});opts.onclose()}})}return false};$.alert.defaults={message:null,width:"300px",onclose:function(){},alertCss:"james_dialogUI_alert",titleCss:"james_dialogUI_alert_title",closeCss:"james_dialogUI_alert_close",contentCss:"james_dialogUI_alert_content",title:blockUI_lang.t1,keyCode:27,fadeOut:300};$.confirm=function(opts){opts=$.extend({},$.confirm.defaults,opts||{});var times;var temp=opts.message.split("#");var seconds="";if(temp[1]==1){var secs=3;var wait=secs*1000;for(i=1;i<=secs;i++){window.setTimeout("$.confirm.update("+i+")",i*1000)}window.setTimeout("$.confirm.timer()",wait);times=window.setTimeout("$.confirm.change()");seconds="("+secs+")";var test="disabled"}html='<div id="james_dialogUI_confirm" class="'+opts.confirmCSS+'"><table border="0" cellpadding="0" cellspacing="0" width="100%"><tr><td align="left" id="james_dialogUI_confirm_title" class="'+opts.titleCss+'" align="center">';html+='<div style="padding:0;padding-left:5px;font-size:13px;text-transform:capitalize;font-weight:bold;color:#FFF;float:left;height:20px;line-height:20px;">'+opts.title+"</div></td>";html+='<td style="width:20px;" align="right"><a href="javascript:" id="james_dialogUI_confirm_close" class="'+opts.closeCss+'"><em style="display:none;">[X]</em></a></td></tr>';html+='<tr><td colspan="2"><div id="james_dialogUI_confirm_content" class="'+opts.contentCss+'"><p style="margin:5px;padding:5px;">'+temp[0]+'</p><center><button class="'+opts.buttonCss+'" id="james_dialogUI_confirm_yes" '+test+" >"+opts.textyes+seconds+'</button>\u3000\u3000\u3000<button id="james_dialogUI_confirm_no" class="'+opts.buttonCss+'">'+opts.textno+"</button></center></div></td></tr></table></div>";$html=$(html);$.blockUI({message:$html,css:{width:opts.width,"max-width":"800px",border:0},overlayCSS:{backgroundColor:"#FFFFFF",opacity:0.6,cursor:"default"}});limitHeight($("#james_dialogUI_confirm_content").children("p"),$(window).height()/2,"scroll");fullCenter($(".blockMsg"));$("#james_dialogUI_confirm_close").click(function(){$.unblockUI({fadeOut:0});opts.funno()});$("#james_dialogUI_confirm_yes").focus().click(function(){$.unblockUI({fadeOut:0});opts.funyes()});$("#james_dialogUI_confirm_no").click(function(){$.unblockUI({fadeOut:0});clearTimeout(times);opts.funno()});$(document).keypress(function(e){if(e.keyCode==27){$.unblockUI({fadeOut:0});opts.funno()}});$("#james_dialogUI_confirm").jamesDrag({handler:"#james_dialogUI_confirm_title"});$.confirm.update=function(num,value){var secs=3;var wait=secs*1000;$("#james_dialogUI_confirm_yes").attr("disabled",true);if(num==(wait/1000)){$("#james_dialogUI_confirm_yes").html(opts.textyes)}else{printnr=(wait/1000)-num;$("#james_dialogUI_confirm_yes").html(opts.textyes+"("+printnr+")")}};$.confirm.timer=function(){$("#james_dialogUI_confirm_yes").attr("disabled",false);$("#james_dialogUI_confirm_yes").val(opts.textyes)};var node=document.getElementById("notice_color");$.confirm.change=function(){if(node!=null){str=node.style.color.toLowerCase();node.style.color=str=="#ff1100"||str=="rgb(255, 17, 0)"?"#000000":"#FF1100";times=window.setTimeout("$.confirm.change()",1000)}}};$.confirm.defaults={message:null,title:blockUI_lang.t2,width:"300px",funyes:function(){},funno:function(){},confirmCSS:"james_dialogUI_confirm",titleCss:"james_dialogUI_confirm_title",closeCss:"james_dialogUI_confirm_close",textyes:blockUI_lang.t3,textno:blockUI_lang.t4,buttonCss:"james_dialogUI_confirm_button",contentCss:"james_dialogUI_confirm_content"};$.ajaxUploadUI=function(opts){opts=$.extend({},$.ajaxUploadUI.defaults,opts||{});opts.keyCode=null;if(opts.message&&opts.message!=null){opts.message+="<br />"}else{opts.message=""}opts.fadeOut=0;opts.message='<form action="'+opts.url+'" method="POST" name="james_uploadUI" target="james_uploadUI_iframe" id="james_uploadUI" enctype="multipart/form-data" style="margin:0;padding:5px 0 10px 0;">'+opts.message+'<input type="file" size="20" name="'+opts.inputfile+'" id="james_uploadUI_file" value="'+blockUI_lang.t5+'">  <button type="button" id="james_uploadUI_submit" class="'+opts.button.css+'" disabled>'+opts.button.text+'</button></form><span style="display:none;text-align:center;" id="james_uploadUI_loading"><center>'+opts.loadtext+'<br /><img src="../dilogUI/'+opts.loadimg+'" align="absmiddle"></center></span><span id="james_uploadUI_error" style="color:red;"></span><iframe name="james_uploadUI_iframe" id="james_uploadUI_iframe" style="width:0px; height:0px;display:none;"></iframe>';$.alert(opts);$("#james_uploadUI_file").change(function(){if($("#james_uploadUI_file").val()!=""){$("#james_uploadUI_submit").attr("disabled",false)}else{$("#james_uploadUI_submit").attr("disabled",true)}});s=$.extend({},$.ajaxSettings,opts);var xml={};var requestDone=false;function uploadCallBack(isTimeout){var iframe=document.getElementById("james_uploadUI_iframe");try{if(iframe.contentWindow){xml.responseText=iframe.contentWindow.document.body?iframe.contentWindow.document.body.innerHTML:null;xml.responseXML=iframe.contentWindow.document.XMLDocument?iframe.contentWindow.document.XMLDocument:iframe.contentWindow.document}else{if(iframe.contentDocument){xml.responseText=iframe.contentDocument.document.body?iframe.contentDocument.document.body.innerHTML:null;xml.responseXML=iframe.contentDocument.document.XMLDocument?iframe.contentDocument.document.XMLDocument:iframe.contentDocument.document}}}catch(e){uploadError(blockUI_lang.t6);$.handleError(s,xml,null,e)}if(xml||isTimeout=="timeout"){requestDone=true;var status;try{status=isTimeout!="timeout"?"success":"error";if(status!="error"){var data=uploadHttpData(xml,s.dataType);$("#james_uploadUI_loading").hide();$("#james_uploadUI_error").empty();$("<center><button id='james_uploadUI_finish' class='"+opts.button.css+"'>"+blockUI_lang.t7+"</button></center>").appendTo("#james_uploadUI_error");$("#james_uploadUI_finish").click(function(){$.unblockUI({fadeOut:opts.fadeOut})});if(s.success){s.success(data,status)}if(s.global){$.event.trigger("ajaxSuccess",[xml,s])}}else{uploadError(blockUI_lang.t6);$.handleError(s,xml,status)}}catch(e){uploadError(blockUI_lang.t6);status="error";$.handleError(s,xml,status,e)}if(s.global){$.event.trigger("ajaxComplete",[xml,s])}if(s.global&&!--$.active){$.event.trigger("ajaxStop")}if(s.complete){s.complete(xml,status)}$(iframe).unbind();xml=null}}function uploadHttpData(xml,type){var data=!type;data=(type=="xml"||data)?xml.responseXML:xml.responseText;if(type=="script"){$.globalEval(data)}if(type=="json"){eval("data = "+data)}if(type=="html"){}return data}function showError(msg){$("#james_uploadUI_error").html(msg).fadeIn(0);setTimeout(function(){$("#james_uploadUI_error").fadeOut(400)},2000)}function uploadStart(){requestDone=false;$("#james_uploadUI").hide();$("#james_uploadUI_loading").show();if(s.global&&!$.active++){$.event.trigger("ajaxStart")}}function uploadError(msg){$("#james_uploadUI_loading").hide();$("#james_uploadUI").show();showError(msg)}$("#james_uploadUI_submit").click(function(){filepath=$("#james_uploadUI_file").val();if(filepath!=""&&filepath!=null){filetype=filepath.substr(filepath.lastIndexOf(".")+1).toLowerCase();if($.inArray(filetype,opts.filetype)==-1){showError(filetype+blockUI_lang.t8+opts.filetype.join(","));return false}uploadStart();if(s.timeout>0){setTimeout(function(){if(!requestDone){uploadCallBack("timeout")}},s.timeout)}try{var form=$("#james_uploadUI");$(form).attr("method","POST");if(form.encoding){form.encoding="multipart/form-data"}else{form.enctype="multipart/form-data"}$(form).submit()}catch(e){uploadError(blockUI_lang.t6);status="error";$.handleError(s,xml,status,e)}if(window.attachEvent){document.getElementById("james_uploadUI_iframe").attachEvent("onload",uploadCallBack)}else{document.getElementById("james_uploadUI_iframe").addEventListener("load",uploadCallBack,false)}return{abort:function(){}}}})};$.ajaxUploadUI.defaults={url:"",dataType:"html",filetype:["txt","csv","gif","jpg","png"],inputfile:"james_uploadUI_file",success:function(data){},error:function(data){},timeout:2400000,message:null,alertCss:"james_dialogUI_upload",titleCss:"james_dialogUI_upload_title",closeCss:"james_dialogUI_upload_close",contentCss:"james_dialogUI_upload_content",title:blockUI_lang.t9,width:"350px",button:{css:"",text:blockUI_lang.t10},loadimg:"lib/loading.gif",loadtext:blockUI_lang.t11};$.blockUI.defaults={message:"<h1>Please wait...</h1>",css:{padding:0,margin:0,width:"30%",top:"40%",left:"35%",textAlign:"center",color:"#000",border:"1px #000000 solid",backgroundColor:"#FFFFFF"},overlayCSS:{backgroundColor:"#509f52",opacity:0.3,cursor:"default"},iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank",forceIframe:false,baseZ:2000,centerX:true,centerY:true,allowBodyStretch:true,bindEvents:true,constrainTabKey:true,fadeIn:200,fadeOut:400,timeout:0,showOverlay:true,focusInput:true,applyPlatformOpacityRules:true,onUnblock:null,quirksmodeOffsetHack:4};$.blockUI.version="1.0.0";var ie6=$.browser.msie&&/MSIE 6.0/.test(navigator.userAgent);var pageBlock=null;var pageBlockEls=[];function install(el,opts){var full=(el==window);var msg=opts&&opts.message!==undefined?opts.message:undefined;opts=$.extend({},$.blockUI.defaults,opts||{});opts.overlayCSS=$.extend({},$.blockUI.defaults.overlayCSS,opts.overlayCSS||{});var css=$.extend({},$.blockUI.defaults.css,opts.css||{});msg=msg===undefined?opts.message:msg;if(full&&pageBlock){remove(window,{fadeOut:0})}if(msg&&typeof msg!="string"&&(msg.parentNode||msg.jquery)){var node=msg.jquery?msg[0]:msg;var data={};$(el).data("blockUI.history",data);data.el=node;data.parent=node.parentNode;data.display=node.style.display;data.position=node.style.position;if(data.parent){data.parent.removeChild(node)}}var z=opts.baseZ;var lyr1=($.browser.msie||opts.forceIframe)?$('<iframe class="blockUI" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;position:absolute;width:100%;height:100%;top:0;left:0" src="'+opts.iframeSrc+'"></iframe>'):$('<div class="blockUI" style="display:none"></div>');var lyr2=$('<div class="blockUI blockOverlay" style="z-index:'+(z++)+';display:none;border:none;margin:0;padding:0;width:100%;height:100%;top:0;left:0"></div>');var lyr3=full?$('<div class="blockUI blockMsg blockPage" style="z-index:'+z+';display:none;position:fixed"></div>'):$('<div class="blockUI blockMsg blockElement" style="z-index:'+z+';display:none;position:absolute"></div>');if(msg){lyr3.css(css)}if(!opts.applyPlatformOpacityRules||!($.browser.mozilla&&/Linux/.test(navigator.platform))){lyr2.css(opts.overlayCSS)}lyr2.css("position",full?"fixed":"absolute");if($.browser.msie||opts.forceIframe){lyr1.css("opacity",0)}$([lyr1[0],lyr2[0],lyr3[0]]).appendTo(full?"body":el);var expr=$.browser.msie&&($.browser.version<8||!$.boxModel)&&(!$.boxModel||$("object,embed",full?null:el).length>0);if(ie6||(expr&&setExpr)){if(full&&opts.allowBodyStretch&&$.boxModel){$("html,body").css("height","100%")}if((ie6||!$.boxModel)&&!full){var t=sz(el,"borderTopWidth"),l=sz(el,"borderLeftWidth");var fixT=t?"(0 - "+t+")":0;var fixL=l?"(0 - "+l+")":0}$.each([lyr1,lyr2,lyr3],function(i,o){var s=o[0].style;s.position="absolute";if(i<2){full?s.setExpression("height","Math.max(document.body.scrollHeight, document.body.offsetHeight) - (jQuery.boxModel?0:"+opts.quirksmodeOffsetHack+') + "px"'):s.setExpression("height",'this.parentNode.offsetHeight + "px"');full?s.setExpression("width",'jQuery.boxModel && document.documentElement.clientWidth || document.body.clientWidth + "px"'):s.setExpression("width",'this.parentNode.offsetWidth + "px"');if(fixL){s.setExpression("left",fixL)}if(fixT){s.setExpression("top",fixT)}}else{if(opts.centerY){if(full){s.setExpression("top",'(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (blah = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"')}s.marginTop=0}else{if(!opts.centerY&&full){var top=(opts.css&&opts.css.top)?parseInt(opts.css.top):0;var expression="((document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "+top+') + "px"';s.setExpression("top",expression)}}}})}if(msg){lyr3.append(msg);if(msg.jquery||msg.nodeType){$(msg).show()}}if(($.browser.msie||opts.forceIframe)&&opts.showOverlay){lyr1.show()}if(opts.fadeIn){if(opts.showOverlay){lyr2._fadeIn(opts.fadeIn)}if(msg){lyr3.fadeIn(opts.fadeIn)}}else{if(opts.showOverlay){lyr2.show()}if(msg){lyr3.show()}}bind(1,el,opts);if(full){pageBlock=lyr3[0];pageBlockEls=$(":input:enabled:visible",pageBlock);if(opts.focusInput){setTimeout(focus,20)}}else{center(lyr3[0],opts.centerX,opts.centerY)}if(opts.timeout){var to=setTimeout(function(){full?$.unblockUI(opts):$(el).unblock(opts)},opts.timeout);$(el).data("blockUI.timeout",to)}}function remove(el,opts){var full=el==window;var $el=$(el);var data=$el.data("blockUI.history");var to=$el.data("blockUI.timeout");if(to){clearTimeout(to);$el.removeData("blockUI.timeout")}opts=$.extend({},$.blockUI.defaults,opts||{});bind(0,el,opts);var els=full?$("body").children().filter(".blockUI"):$(".blockUI",el);if(full){pageBlock=pageBlockEls=null}if(opts.fadeOut){els.fadeOut(opts.fadeOut);setTimeout(function(){reset(els,data,opts,el)},opts.fadeOut)}else{reset(els,data,opts,el)}}function reset(els,data,opts,el){els.each(function(i,o){if(this.parentNode){this.parentNode.removeChild(this)}});if(data&&data.el){data.el.style.display=data.display;data.el.style.position=data.position;if(data.parent){data.parent.appendChild(data.el)}$(data.el).removeData("blockUI.history")}if(typeof opts.onUnblock=="function"){opts.onUnblock(el,opts)}}function bind(b,el,opts){var full=el==window,$el=$(el);if(!b&&(full&&!pageBlock||!full&&!$el.data("blockUI.isBlocked"))){return}if(!full){$el.data("blockUI.isBlocked",b)}if(!opts.bindEvents||(b&&!opts.showOverlay)){return}var events="mousedown mouseup keydown keypress";b?$(document).bind(events,opts,handler):$(document).unbind(events,handler)}function handler(e){if(e.keyCode&&e.keyCode==9){if(pageBlock&&e.data.constrainTabKey){var els=pageBlockEls;var fwd=!e.shiftKey&&e.target==els[els.length-1];var back=e.shiftKey&&e.target==els[0];if(fwd||back){setTimeout(function(){focus(back)},10);return false}}}if($(e.target).parents("div.blockMsg").length>0){return true}return $(e.target).parents().children().filter("div.blockUI").length==0}function focus(back){if(!pageBlockEls){return}var e=pageBlockEls[back===true?pageBlockEls.length-1:0];if(e){e.focus()}}function center(el,x,y){var p=el.parentNode,s=el.style;var l=((p.offsetWidth-el.offsetWidth)/2)-sz(p,"borderLeftWidth");var t=((p.offsetHeight-el.offsetHeight)/2)-sz(p,"borderTopWidth");if(x){s.left=l>0?(l+"px"):"0"}if(y){s.top=t>0?(t+"px"):"0"}}function sz(el,p){return parseInt($.css(el,p))||0}function fullCenter(el){var topset=$(window).height()/2-$(el).height()/2+(ie6?document.documentElement.scrollTop:0);var leftset=$(window).width()/2-$(el).width()/2+(ie6?document.documentElement.scrollLeft:0);$(el).css({left:leftset+"px",top:topset+"px"})}function limitHeight(el,h,type){if($.inArray(type,["auto","hidden","inherit","scroll","visible"])==-1){type="auto"}if($(el).height()>h){$(el).css({height:h,overflow:type,"overflow-x":"hidden"})}}})(jQuery);
